<!doctype html>
<html>
<head>
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable"  content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no">
    
    
    <!--Simple SEO-->

<meta name="description" content=My Shelter/>


<meta name="robots" content=all />
<meta name="google" content=all />
<meta name="googlebot" content=all />
<meta name="verify" content=all />
    <!--Title-->

<title>Ionic Project를 Android Native 내에 Embedded 시키는 방법 #3 | 개발 블로그</title>

<link rel="alternate" href="/atom.xml" title="개발 블로그" type="application/atom+xml">


<link rel="icon" href="/favicon.ico">

    
<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/pages/post.css">
<link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/thirdParty/highlight/github.css">

    <!--script-->



<!--<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>-->


    
    
<!-- old source
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', '', 'auto');
    ga('send', 'pageview');

</script>
-->

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111716055-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-111716055-1');
</script>


</head>

<body id="normal">
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<style>
    header{ top: 71px; position: absolute!important;}
    #container{padding-top: 151px!important;}
</style>
<div style="position:fixed;z-index:9999;left:0;top:0;width:100%;height:70px;background-color:#e0e0e0;color:#396CA5;border-bottom:1px solid #cecece;text-align:center;line-height:70px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis">귀하의 브라우저 버전이 너무 낮습니다. 더 나은 사용환경을 경험하시려면 브라우저 버전을 업데이트 하시거나 IE Edge, Chrome, Firefox, Safari 등과 같은 최신 브라우저를 사용하십시오</div>
<![endif]-->

<div id="wrap">
    <header  style="position: absolute;" >
    <div id="site-meta">
        <a href="/" id="logo">
            <h1 class="title">개발 블로그</h1>
        </a>
        
        <h2 class="subtitle">Blah Blah</h2>
        
    </div>
    <ul id="nav">
        
            <li><a href="/"><i class="fa fa-home"></i>Home</a></li>
        
            <li><a href="/about"><i class="fa fa-user"></i>About</a></li>
        
            <li><a href="/atom.xml"><i class="fa fa-rss"></i>RSS</a></li>
        
        <li id="search"><a href="javascript:void(0)"><i class="fa fa-search"></i>검색</a></li>
    </ul>
</header>

    <div id="container">
        
<ul id="sidebar">
    
    
<li class="widget notification">
    <i class="fa fa-bell-o"></i>
    <div>
        <p>블로그 공지<br>
ylion 한국어 지원：<a href="https://github.com/henotia" title="github" target="_blank">Henotia</a>
</p>
    </div>
</li>

    
    
<li class="widget widget-normal category">
    <h3 class="fa fa-th widget-title">카테고리</h3>
    <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Ionic/"><i class="fa" aria-hidden="true">Ionic</i></a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/계획/"><i class="fa" aria-hidden="true">계획</i></a><span class="category-list-count">1</span></li></ul>
</li>


    
    
<li class="widget widget-normal archive">
  <h3 class="fa fa-archive widget-title">Archives</h3>
    <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/"><i class="fa" aria-hidden="true">1월 2018</i></a><span class="archive-list-count">5</span></li></ul>
</li>


    
    
<li class="widget widget-normal tags">
  <h3 class="fa fa-tags widget-title">태그</h3>
  <div class="tagcloud-content">
    
      <a href="/tags/Ionic/" style="font-size: 0.17rem; color: #386da4">Ionic</a> <a href="/tags/Cordova/" style="font-size: 0.2rem; color: #0a407c">Cordova</a> <a href="/tags/신년계획/" style="font-size: 0.15rem; color: #69c">신년계획</a> <a href="/tags/Android/" style="font-size: 0.15rem; color: #69c">Android</a> <a href="/tags/Plugin/" style="font-size: 0.15rem; color: #69c">Plugin</a>
  </div>
</li>


    
    
<li class="widget widget-normal friends-link">
    <h3 class="fa fa-globe widget-title">링크</h3><br/>

    
        <a href="http://geekaholiclin.github.io" class="fa" target="_blank">테마 제작자</a>

    
        <a href="http://henotia.github.io" class="fa" target="_blank">한국어 번역</a>

    

</li>

    
</ul>


        <div id="main">
    <article id="post">
        <div id="post-header">

            <h1 id="Ionic Project를 Android Native 내에 Embedded 시키는 방법 #3">
                
                Ionic Project를 Android Native 내에 Embedded 시키는 방법 #3
                
            </h1>
            <div class="article-meta">
    
    
    <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
        <span>Ionic</span>
    </span>
    
    
    <span class="fa-wrap">
         <i class="fa fa-tags"></i>
        <span class="tags-meta">
            
            Ionic
            
        </span>
    </span>
    
    
    <span class="fa-wrap">
        <i class="fa fa-clock-o"></i>
        <span class="date-meta ">2018/01/12</span>
    </span>
    
    
    
</div>

            
            
        </div>
        
        <div id="post-body">
            <blockquote>
<p><strong>본 post에서는 Ionic 프로젝트를 Android Fragment를 통해 실행하는 방법에 대해 설명합니다</strong><br><strong>본 post의 내용은 <a href="/IonicEmbedded-1">Ionic Project를 Android Native 내에 Embedded 시키는 방법 #1</a>과 <a href="/IonicEmbedded-2">Ionic Project를 Android Native 내에 Embedded 시키는 방법 #2</a>에서 이어집니다</strong></p>
</blockquote>
<hr>
<h1 id="Android-Native-코드-작성"><a href="#Android-Native-코드-작성" class="headerlink" title="Android Native 코드 작성"></a>Android Native 코드 작성</h1><p>전 post에서는 Activity를 통해 Ionic Project를 실행하는 방법에 대해 설명했다.<br>이번 post에서는 Fragment를 통해 Ionic Project를 실행하는 방법에 대해 설명한다.</p>
<h1 id="IonicFragment-생성"><a href="#IonicFragment-생성" class="headerlink" title="IonicFragment 생성"></a>IonicFragment 생성</h1><p>Ionic을 불러오는 Fragment로 <code>IonicFragment</code>를 새로 만들어준다.</p>
<figure class="highlight java"><figcaption><span>IonicFragment.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IonicFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>IonicFragment에서는 CordovaActivity에서 Ionic Project를 불러오기까지의 과정을 직접 처리해 주어야 한다.</p>
<figure class="highlight java"><figcaption><span>IonigFragment.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IonicFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> CordovaWebView appView;</span><br><span class="line">  <span class="keyword">protected</span> CordovaPreferences preferences;</span><br><span class="line">  <span class="keyword">protected</span> String launchUrl;</span><br><span class="line">  <span class="keyword">protected</span> ArrayList&lt;PluginEntry&gt; pluginEntries;</span><br><span class="line">  <span class="keyword">protected</span> CordovaInterfaceImpl cordovaInterface;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> IonicFragment <span class="title">newInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> IonicFragment();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Nullable</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, @Nullable ViewGroup container, Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    View rootView = inflater.inflate(R.layout.fragment_layout, container, <span class="keyword">false</span>);</span><br><span class="line"></span><br><span class="line">    cordovaInterface = <span class="keyword">new</span> CordovaInterfaceImpl(getActivity());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (savedInstanceState != <span class="keyword">null</span>) &#123;</span><br><span class="line">      cordovaInterface.restoreInstanceState(savedInstanceState);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    loadConfig();</span><br><span class="line"></span><br><span class="line">    appView = makeWebView();</span><br><span class="line"></span><br><span class="line">    createViews(rootView);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!appView.isInitialized()) &#123;</span><br><span class="line">      appView.init(cordovaInterface, pluginEntries, preferences);</span><br><span class="line">    &#125;</span><br><span class="line">    cordovaInterface.onCordovaInit(appView.getPluginManager());</span><br><span class="line"></span><br><span class="line">    appView.loadUrl(launchUrl);</span><br><span class="line">    <span class="keyword">return</span> rootView;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">createViews</span><span class="params">(View rootView)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Cordova SystemWebView에 대한 Layout Parameter 설정</span></span><br><span class="line">    RelativeLayout.LayoutParams params = <span class="keyword">new</span> RelativeLayout.LayoutParams(</span><br><span class="line">      RelativeLayout.LayoutParams.MATCH_PARENT,</span><br><span class="line">      RelativeLayout.LayoutParams.MATCH_PARENT);</span><br><span class="line"></span><br><span class="line">    appView.getView().setLayoutParams(params);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// rootView에 SystemWebView 추가</span></span><br><span class="line">    ((RelativeLayout) rootView).addView(appView.getView());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> CordovaWebView <span class="title">makeWebView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> CordovaWebViewImpl(makeWebViewEngine());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> CordovaWebViewEngine <span class="title">makeWebViewEngine</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> CordovaWebViewImpl.createEngine(getActivity(), preferences);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">loadConfig</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ConfigXmlParser parser = <span class="keyword">new</span> ConfigXmlParser();</span><br><span class="line">    parser.parse(getActivity());</span><br><span class="line">    preferences = parser.getPreferences();</span><br><span class="line">    preferences.setPreferencesBundle(getActivity().getIntent().getExtras());</span><br><span class="line">    pluginEntries = parser.getPluginEntries();</span><br><span class="line">    launchUrl = parser.getLaunchUrl();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>IonicFragment에서 사용하는, CordovaWebView를 삽입시킬 <code>fragment_layout.xml</code>을 함께 작성한다<br>해당 layout 아래에 <strong>자바코드를 사용해 직접</strong> <code>SystemWebView</code>를 삽입시킨다.</p>
<figure class="highlight xml"><figcaption><span>fragment_layout.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">RelativeLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">RelativeLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>위의 코드는 이전 IonicActivity를 Fragment 형태로 변경한 내용이다.</p>
<h1 id="Plugin-통신을-위한-코드-추가-MainActivity-java"><a href="#Plugin-통신을-위한-코드-추가-MainActivity-java" class="headerlink" title="Plugin 통신을 위한 코드 추가 (MainActivity.java)"></a>Plugin 통신을 위한 코드 추가 (MainActivity.java)</h1><p>Plugin은 <code>onActivityResult()</code>를 통해 Plugin 결과값을 Activity로 보낸다.<br>Fragment의 경우 Activity로 보내진 onActivityResult()의 값을 직접 받지 못하고 Fragment를 감싸고 있는 Activity에서 가져와야 한다.</p>
<p>따라서 Fragment를 감싸고 있는 MainActivity에서 onActivityResult의 Override를 통한 추가 구현이 필요하다</p>
<figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 위에서 작성한 IonicFragment의 인스턴스를 만들어준다.</span></span><br><span class="line">  IonicFragment ionicFragment = IonicFragment.newInstance();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// onActivityResult 구현 부분</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">    ionicFragment.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>이후 ionicFragment에서도 onActivityResult()의 결과값을 받아 처리할 수 있도록 코드를 작성한다.</p>
<h1 id="Plugin-통신을-위한-코드-추가-IonicFragment-java"><a href="#Plugin-통신을-위한-코드-추가-IonicFragment-java" class="headerlink" title="Plugin 통신을 위한 코드 추가 (IonicFragment.java)"></a>Plugin 통신을 위한 코드 추가 (IonicFragment.java)</h1><p>MainActivity에서 넘겨받는 onActivityResult()의 값을 IonicFragment의 cordovaInterface가 받아서 처리할 수 있도록 해주어야 한다.</p>
<p>Plugin쪽과 관련된 부분은 <code>loadConfig()</code>메소드 아래에 기입한다</p>
<figure class="highlight java"><figcaption><span>IonicFragment.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IonicFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</span><br><span class="line">  ... <span class="comment">// end of loadConfig()</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startActivityForResult</span><span class="params">(Intent intent, <span class="keyword">int</span> requestCode)</span> </span>&#123;</span><br><span class="line">    cordovaInterface.setActivityResultRequestCode(requestCode);</span><br><span class="line">    <span class="keyword">super</span>.startActivityForResult(intent, requestCode);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">    cordovaInterface.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, @NonNull String[] permissions, @NonNull <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      cordovaInterface.onRequestPermissionResult(requestCode, permissions, grantResults);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (JSONException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</span><br><span class="line">    cordovaInterface.onSaveInstanceState(outState);</span><br><span class="line">    <span class="keyword">super</span>.onSaveInstanceState(outState);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onConfigurationChanged</span><span class="params">(Configuration newConfig)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onConfigurationChanged(newConfig);</span><br><span class="line">    <span class="keyword">if</span> (appView == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">    PluginManager pm = appView.getPluginManager();</span><br><span class="line">    <span class="keyword">if</span> (pm != <span class="keyword">null</span>) &#123;</span><br><span class="line">      pm.onConfigurationChanged(newConfig);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="IonicFragment-실행하기"><a href="#IonicFragment-실행하기" class="headerlink" title="IonicFragment 실행하기"></a>IonicFragment 실행하기</h1><p>IonicFragment를 실행하기 위해 <code>MainActivity.java</code>와 <code>activity_main.xml</code>을 다음과 같이 수정해준다.</p>
<figure class="highlight java"><figcaption><span>MainActivity.java</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> <span class="keyword">implements</span> <span class="title">View</span>.<span class="title">OnClickListener</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 위에서 작성한 IonicFragment의 인스턴스를 만들어준다.</span></span><br><span class="line">  IonicFragment ionicFragment = IonicFragment.newInstance();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (v.getId()) &#123;</span><br><span class="line">      <span class="keyword">case</span> R.id.startIonicActivity:</span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(<span class="keyword">this</span>, IonicActivity.class);</span><br><span class="line">        startActivity(intent);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> R.id.startIonicFragment:</span><br><span class="line">        Button btns[] = &#123;</span><br><span class="line">          findViewById(R.id.startIonicActivity),</span><br><span class="line">          findViewById(R.id.startIonicFragment)</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 버튼들이 있으면 Fragment 화면 상단에 보여지므로 전부 상태를 View.GONE으로 변경</span></span><br><span class="line">        <span class="keyword">for</span> (Button btn : btns) &#123;</span><br><span class="line">          btn.setVisibility(View.GONE);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        FragmentManager fm = getFragmentManager();</span><br><span class="line">        FragmentTransaction tx = fm.beginTransaction();</span><br><span class="line">        tx.add(R.id.cordovaWebViewFrag, ionicFragment);</span><br><span class="line">        tx.commitAllowingStateLoss();</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// onActivityResult 구현 부분</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><figcaption><span>activity_main.xml</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- activity_main.xml에 Button과 RelativeLayout 추가 --&gt;</span></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Fragment 호출을 위한 Button --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"Ionic Project 실행(Fragment)"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/startIonicFragment"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:onClick</span>=<span class="string">"onClick"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">"@+id/startIonicActivity"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- Fragment가 들어갈 Layout --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">RelativeLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/cordovaWebViewFrag"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">"@+id/startIonicFragment"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_alignParentStart</span>=<span class="string">"true"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>이후 MainActivity 내의 Fragment 실행 버튼을 누르면 Fragment의 형태로 IonicProject가 동작한다.</p>

        </div>
        <div id="post-footer">
            <div class="avatar" >
                <img src="http://example.com/author.jpg" alt="avatar"/>
                
                
            </div>
            <ul class="author-profile-section">
                <li>
                  
                  글쓴이:
                  
                    
                    <a href="/about.html">Henotia</a>
                </li>
                
                <li>발행 일자: <span>2018-01-12  16:37:08</span></li>
                
                <li>업데이트 일자: <span>2018-01-12  17:06:25</span></li>
                
                <li class="post-category">
                    카테고리:
                    
                    <a href="/categories/Ionic/">Ionic</a>
                    
                </li>
                <li class="post-tags">
                    태그:
                    
                    <a href="/tags/Ionic/">Ionic</a>
                    
                    <a href="/tags/Cordova/">Cordova</a>
                    
                </li>
                
                <li> License: <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="크리에이티브 커먼즈 CC BY-NC-SA 4.0 라이센스">
<img src="https://licensebuttons.net/l/by-nc-sa/4.0/80x15.png" style="vertical-align:middle">
저작자표시-비영리-동일조건변경허락 (CC BY-NC-SA 4.0）
</a></li>
                
            </ul>

            
        </div>
    </article>
    <div class="article-nav">
        
        <a href="/MakeCordovaPlugin-1/" class="pre-post fa fa-caret-left">Cordova Plugin 만들기 #1</a>
        
        
        <a href="/IonicEmbedded-2/" class="next-post fa">Ionic Project를 Android Native 내에 Embedded 시키는 방법 #2</a>
        
    </div>
    
    <div id="comments">
        

<div id="disqus_thread"></div>
<script>
    var shortName = 'henotia-github-io-1'

    var disqus_config = function () {
     this.page.url = 'http://henotia.github.io/IonicEmbedded-3/';  // Replace PAGE_URL with your page's canonical URL variable
     this.page.identifier = 'post'+'-IonicEmbedded-3/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
     };
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//'+shortName+'.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<script id="dsq-count-scr" src="//henotia-github-io-1.disqus.com/count.js" async></script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>




    </div>
    
</div>


    </div>
    <footer id="footer">
    
    <div class="social">
        
        <a href="https://github.com/henotia" class="fa fa-github" target="_blank" title="Follow me~"></a>
        
    </div>
    
    <div>
        
        <a href="/" class="copyright-links">Henotia</a>&copy;2018 - 2018.All Rights
        Reserved.
    </div>
    <p>Powered by <a href="https://hexo.io" class="copyright-links" target="_blank">Hexo</a> | Theme by <a
                href="https://github.com/GeekaholicLin" class="copyright-links" target="_blank">GeekaholicLin</a>
    </p>
    
</footer>

</div>
    <ul id="tools">
    <li class="totop-btn fa fa-angle-up"></li>
    <li class="exchange-btn fa fa-exchange"></li>
  
    <li class="toc-btn fa fa-list-ul"></li>
    
    

    
    <li class="comment-btn fa fa-comments-o">
        <a href="#comments" title="comments"></a>
    </li>
    
</ul>
<p id="process"></p>
<div id="search-overlay">
    <div class="search-area-wrap">
        <div id="search-area">
            <div class="input-wrap focus">
                <i class="fa fa-search" aria-hidden="true"></i>
                <input id="search-input" autofocus autocomplete="off" type="text"
                       placeholder="search this website..."/>
            </div>
            <ul id="search-result">
                <li class="load-first"><i class="fa fa-spinner fa-pulse"></i></li>
            </ul>
        </div>
    </div>
</div>

    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Android-Native-코드-작성"><span class="toc-number">1.</span> <span class="toc-text"><a href="#Android-Native-&#xCF54;&#xB4DC;-&#xC791;&#xC131;" class="headerlink" title="Android Native &#xCF54;&#xB4DC; &#xC791;&#xC131;"></a>Android Native &#xCF54;&#xB4DC; &#xC791;&#xC131;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IonicFragment-생성"><span class="toc-number">2.</span> <span class="toc-text"><a href="#IonicFragment-&#xC0DD;&#xC131;" class="headerlink" title="IonicFragment &#xC0DD;&#xC131;"></a>IonicFragment &#xC0DD;&#xC131;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Plugin-통신을-위한-코드-추가-MainActivity-java"><span class="toc-number">3.</span> <span class="toc-text"><a href="#Plugin-&#xD1B5;&#xC2E0;&#xC744;-&#xC704;&#xD55C;-&#xCF54;&#xB4DC;-&#xCD94;&#xAC00;-MainActivity-java" class="headerlink" title="Plugin &#xD1B5;&#xC2E0;&#xC744; &#xC704;&#xD55C; &#xCF54;&#xB4DC; &#xCD94;&#xAC00; (MainActivity.java)"></a>Plugin &#xD1B5;&#xC2E0;&#xC744; &#xC704;&#xD55C; &#xCF54;&#xB4DC; &#xCD94;&#xAC00; (MainActivity.java)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Plugin-통신을-위한-코드-추가-IonicFragment-java"><span class="toc-number">4.</span> <span class="toc-text"><a href="#Plugin-&#xD1B5;&#xC2E0;&#xC744;-&#xC704;&#xD55C;-&#xCF54;&#xB4DC;-&#xCD94;&#xAC00;-IonicFragment-java" class="headerlink" title="Plugin &#xD1B5;&#xC2E0;&#xC744; &#xC704;&#xD55C; &#xCF54;&#xB4DC; &#xCD94;&#xAC00; (IonicFragment.java)"></a>Plugin &#xD1B5;&#xC2E0;&#xC744; &#xC704;&#xD55C; &#xCF54;&#xB4DC; &#xCD94;&#xAC00; (IonicFragment.java)</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#IonicFragment-실행하기"><span class="toc-number">5.</span> <span class="toc-text"><a href="#IonicFragment-&#xC2E4;&#xD589;&#xD558;&#xAE30;" class="headerlink" title="IonicFragment &#xC2E4;&#xD589;&#xD558;&#xAE30;"></a>IonicFragment &#xC2E4;&#xD589;&#xD558;&#xAE30;</span></a></li></ol>




<script src="/js/search.js"></script>
<script type="text/javascript">
    //theme config datas
    var copyrightObj = {};
    copyrightObj.enable = 'true';
    copyrightObj.triggerCopyLength = '200';
    copyrightObj.appendText = '상업적인 사용은 저자에게 연락하여 권한을 얻어주시기 바랍니다. 비상업적 사용은 출처를 명확히 밝혀주시기 바랍니다 ©';
    var leancloudObj = {};
    leancloudObj.enable = 'false';
    leancloudObj.className = 'BlogCounter';
    leancloudObj.limits = '10';
</script>
<script type="text/javascript">
    var search = {};
    var search_path = "search.xml";
    if (!search_path) {
        search_path = "search.xml";
    }
    search.path = "/" + search_path;
    search.func =  _ajax.init();
</script>
<script src="/js/app.js"></script>


</body>
</html>